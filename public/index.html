<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NBA Guessing Game</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="logo3.png" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
  <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
  <style>
    #logout{
      transform: rotate(-90deg);
    }
  </style>
</head>
<body class="bg-gray-900">
<div class="min-h-screen bg-gray-900 text-white">


  <nav class="flex justify-between items-center p-4 border-b border-gray-800 sticky top-0 bg-gray-900">
    <div class="flex items-center">
      <a href="index.html" class="flex items-center hover:text-green-500">
          <img src="logo3.png" alt="NBA Logo" class="h-8 mr-2"> 
          <span class="text-xl font-semibold">NBA Guessing Game</span>
        </a>
    </div>
    <div class="flex items-center">
      <button class="p-2">
        <a href="profile2.html" class="flex items-center hover:text-green-500">
          <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="17.4219" height="18.0957"> 
            <g> 
                <rect height="18.0957" opacity="0" width="17.4219" x="0" y="0"/> 
                <path d="M2.39258 18.0859L14.668 18.0859C16.2891 18.0859 17.0605 17.5977 17.0605 16.5234C17.0605 13.9648 13.8281 10.2637 8.53516 10.2637C3.23242 10.2637 0 13.9648 0 16.5234C0 17.5977 0.771484 18.0859 2.39258 18.0859ZM1.93359 16.6113C1.67969 16.6113 1.57227 16.543 1.57227 16.3379C1.57227 14.7266 4.05273 11.7383 8.53516 11.7383C13.0078 11.7383 15.4883 14.7266 15.4883 16.3379C15.4883 16.543 15.3906 16.6113 15.1367 16.6113ZM8.53516 9.04297C10.8594 9.04297 12.7539 6.98242 12.7539 4.46289C12.7539 1.96289 10.8691 0 8.53516 0C6.2207 0 4.31641 2.00195 4.31641 4.48242C4.31641 6.99219 6.21094 9.04297 8.53516 9.04297ZM8.53516 7.56836C7.10938 7.56836 5.88867 6.21094 5.88867 4.48242C5.88867 2.7832 7.08984 1.47461 8.53516 1.47461C9.99023 1.47461 11.1816 2.75391 11.1816 4.46289C11.1816 6.19141 9.9707 7.56836 8.53516 7.56836Z" fill="currentColor" fill-opacity="0.85"/>
            </g> 
         </svg>
          
          <span class="text-xs font-semibold ml-2" id="user-info"></span>
      </a>
      
      </button>
          <a href="/logout" class="flex items-center ml-4 text-sm font-medium hover:text-red-500">
              <svg id="logout" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="17.6953" height="26.4746"> 
                <g> 
                    <rect height="26.4746" opacity="0" width="17.6953" x="0" y="0"/> 
                    <path d="M17.334 10.7617L17.334 20.5078C17.334 22.5195 16.3086 23.5352 14.2676 23.5352L3.06641 23.5352C1.02539 23.5352 0 22.5195 0 20.5078L0 10.7617C0 8.75 1.02539 7.73438 3.06641 7.73438L6.00586 7.73438L6.00586 9.30664L3.08594 9.30664C2.10938 9.30664 1.57227 9.83398 1.57227 10.8496L1.57227 20.4199C1.57227 21.4355 2.10938 21.9629 3.08594 21.9629L14.2383 21.9629C15.2051 21.9629 15.7617 21.4355 15.7617 20.4199L15.7617 10.8496C15.7617 9.83398 15.2051 9.30664 14.2383 9.30664L11.3281 9.30664L11.3281 7.73438L14.2676 7.73438C16.3086 7.73438 17.334 8.75 17.334 10.7617Z" fill="currentColor" fill-opacity="0.85"/> 
                    <path d="M8.66211 15.8887C9.08203 15.8887 9.44336 15.5371 9.44336 15.127L9.44336 5.09766L9.38477 3.63281L10.0391 4.32617L11.5234 5.9082C11.6602 6.06445 11.8555 6.14258 12.0508 6.14258C12.4512 6.14258 12.7637 5.84961 12.7637 5.44922C12.7637 5.24414 12.6758 5.08789 12.5293 4.94141L9.22852 1.75781C9.0332 1.5625 8.86719 1.49414 8.66211 1.49414C8.4668 1.49414 8.30078 1.5625 8.0957 1.75781L4.79492 4.94141C4.64844 5.08789 4.57031 5.24414 4.57031 5.44922C4.57031 5.84961 4.86328 6.14258 5.27344 6.14258C5.45898 6.14258 5.67383 6.06445 5.81055 5.9082L7.28516 4.32617L7.94922 3.63281L7.89062 5.09766L7.89062 15.127C7.89062 15.5371 8.24219 15.8887 8.66211 15.8887Z" fill="currentColor" fill-opacity="0.85"/> 
                </g> 
              </svg>
            <span class="ml-2">Logout</span>
          </a>
          
    </div>
  </nav>

<div class="game text-center p-2 position-relative top-50 flex flex-col">
    <div class="d-flex flex-column align-items-center">
        <input type="text" id="searchBar" class="form-control w-25 mb-8 m-3 top-25" placeholder="Guess 1 of 8" aria-describedby="addon-wrapping">
        <ul id="suggestions" class="form-control w-25 m-2 position-absolute" style="top: 46%; z-index: 100; border: none;"></ul>
        <button id="guessBtn" class="btn btn-success w-min" onclick="fetchSinglePlayer(searchBar.value)">Submit</button>
        <div class="flex justify-center" id="popupBtn">
          <button onclick="togglePopup()" class="btn btn-success">
            View result
          </button>
        </div>
    </div>
    <div class="guesses">
      
    </div>
</div>

<div id="login"></div>


<div class="container mx-auto mt-3 px-4">
  <div class="overflow-x-auto sm:-mx-6 lg:-mx-8">
    <div class="inline-block min-w-full sm:px-6 lg:px-8">
      <table class="min-w-full divide-y divide-gray-200">
          <thead class="bg-gray-50">
              <tr>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Player Name
                  </th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Team Name
                  </th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Conference
                  </th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Division
                  </th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Position
                  </th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Height
                  </th>
                  <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Number
                  </th>
              </tr>
          </thead>
          <tbody id="playerData" class="bg-white text-black p-6 divide-y divide-gray-200">
              <!-- Player data will be dynamically inserted here -->
          </tbody>
      </table>
    </div>
  </div>
</div>



<div class="flex justify-center">
  <button id="playAgainBtn" class="btn btn-success m-3" onclick="window.location.href = 'index.html';" >
    Play again
  </button>
</div>






<div id="popup" class="m-auto hidden inset-0 bg-gray-600 bg-opacity-50 justify-center items-center absolute">
  <div class="bg-gray-900 rounded-lg p-8 text-center m-auto w-1/4 relative top-1/3">
    <button onclick="togglePopup()" class="absolute top-0 right-0 mt-4 mr-4 text-white text-2xl leading-none hover:text-red-700">&times;</button>
    <p id="winLoss" class="text-white"></p>
    <h2 class="text-xl text-white mb-4">The Player is...</h2>
    <p class="text-3xl text-white font-bold mb-4" id="playerName"></p>
    <div class="grid grid-cols-2 gap-4">
      <p class="text-white">Team: <span class="font-bold" id="team"></span></p>
      <p class="text-white">Division: <span class="font-bold" id="division"></span></p>
      <p class="text-white">Conference: <span class="font-bold" id="conference"></span></p>
      <p class="text-white">Position: <span class="font-bold" id="position"></span></p>
      <p class="text-white">Height: <span class="font-bold" id="height"></span></p>
      <p class="text-white">Number: <span class="font-bold" id="number"></span></p>
    </div>
  </div>
</div>



<script src="script.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.6.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script>

    function getQueryParam(name) {
        const urlParams = new URLSearchParams(window.location.search);
        return urlParams.get(name);
    }


    document.addEventListener('DOMContentLoaded', function() {
        const success = getQueryParam('success');
        if (success === '1') {
            showToastWithAnimation();
        }
    });

    function showToastWithAnimation() {
    const toast = Toastify({
        text: "Login successful!",
        duration: 3000,
        gravity: "top",
        position: "center",
        close: true,
        style: {
          background: "white",
          color: "#121827"
        },
        className: "toastify-example toastify-fade-in"
    });

    toast.showToast();
}

</script>

<script>



let idUser;

fetch('/get-user-info')
.then(response => {
    if (response.ok) {
        return response.json();
    }

    if(response.status === 401 || response.status === 403) {
        console.log("není uživatel");
        window.location.href = '/login.html';
    }
    throw new Error('Network response was not ok.');
})
.then(data => {
    console.log('User Info:', data);
    idUser = data.id;

    document.getElementById('user-info').textContent = `${data.username}`;
})
.catch(error => {
    console.error('There has been a problem with your fetch operation:', error);
});
</script>
</div>
</body>
</html>
